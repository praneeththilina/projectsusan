{# {% extends "layout.html" %}
{% block content %}
    <h1 class="text-3xl font-bold mb-6">Request Premium Plan</h1>
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class="flashes">
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  <form method="post">
    {{ form.hidden_tag() }}
    <div class="form-group">
      {{ form.plan.label }}<br>
      {{ form.plan(size=1) }}
      {% for error in form.plan.errors %}
        <span class="error">{{ error }}</span>
      {% endfor %}
    </div>
    <button type="submit">{{ form.submit.label }}</button>
  </form>
{%- endblock content %} #}

{% extends "layout.html" %}
{% block content %}
<h1 class="text-3xl font-bold mb-6">Request Premium Plan</h1>
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class="flashes">
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}
<form method="post">
    {{ form.hidden_tag() }}
    <div class="form-group">
        {{ form.plan.label }}<br>
        {{ form.plan(size=1) }}
        {% for error in form.plan.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>
    <button type="submit">{{ form.submit.label }}</button>
</form>
<h2 class="text-2xl mt-6">Your Last 5 Requests</h2>
<table>
    <thead>
        <tr>
            <th>Requested Plan</th>
            <th>Created At</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for request in user_requests %}
            <tr>
                <td>{{ request.plan.name }}</td>
                <td>{{ request.created_at }}</td>
                <td>
                    {% if request.approved %}
                        Approved
                    {% elif request.rejected %}
                        Rejected
                    {% else %}
                        Pending
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock content %}
